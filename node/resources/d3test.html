<!DOCTYPE html>
<html class=''>

<head>
	<meta charset='UTF-8'/>
</head>

<body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.1/d3.min.js"></script>

	<div id="graph">
	</div>

	<script>
	//var vis = d3.select('#graph').append('svg').attr('width', 800).attr('height', 600);
	var svgContainer = d3.select("#graph").append("svg")
			  	 	  .attr("width", 800)
			  		  .attr("height", 600);


	var parentNodes = [];


	function getEntryByParameter (list, key, value) {
		for (var i in list) {
			if (list[i][key]==value) return list[i];
		}
		return null;
	}





	var dat = d3.json("data.json", function(error, graph) {  
      	
      	var g = svgContainer.selectAll("g")
      		.data (graph["nodes"])
      		.enter()
      		.append("g")
      		.datum(function(d) { 
      			console.log(d["name"]);
      			return d["sources"]; 
      		});

      	console.log(d3.selection);

/*
      	g.append("g");
		g.datum(function(d,g) { 
    		//console.log(d); 
    		console.log(g);
    		return d.name; })
      	//console.log(g);

      	/*
      	var gg = g.append("g")
		gg.append("rect")
      		.attr("x", function(d) {return d.x;})
			.attr("y", function(d) {return d.y;})
			.attr("height", function(d) {return 50;})
			.attr("width", function(d) {return 120;})
			.style("fill", "red");
		*/

			
		


		/*
		var n = svgPane.selectAll("nodes")
			.data(graph["nodes"])
			.enter()
			.append("g")
		*/


		


/*
      		.append("rect")
      		.attr("x", function(d) {return d.x;})
			.attr("y", function(d) {return d.y;})
			.attr("height", function(d) {return 50;})
			.attr("width", function(d) {return 120;})
			.style("fill", "green")

      		.append("rect")
			.attr("x", function(d) {return d.x+100;})
			.attr("y", function(d) {return d.y;})
			.attr("height", function(d) {return 140;})
			.attr("width", function(d) {return 40;})
			.style("fill", "yellow");
*/			


		//console.log(rect);

		/*
		for (var i in nodes) {

			svgPane.selectAll("sources")
				.data(nodes[0]["sources"])
				.enter()
				.append('svg:circle')
				.attr('cx', nodes[i]["x"])
				.attr('cy', nodes[i]["y"])
				.attr('r', '5px')
				.attr('fill', '#88FFAA');
		}




      	/*
		for (var i in graph["links"]) {
			var link = graph["links"][i];
			var sourceNode = getEntryByParameter(nodes, "name", link["source"]);
			var targetNode = getEntryByParameter(nodes, "name", link["target"]);
			
			links.push({"source" : sourceNode, "target" : targetNode});
		}
		console.log(links);


		var vis = svgPane.append("g")
			.attr("width", 300)
			.attr("height", 300);


		var rect = [1,2,3,4];

		vis.selectAll("rect")
			.data(rect)
			.enter()
			.append("rect")
			.attr("x", function(d) {return 50;})
			.attr("y", function(d) {return 50;})
			.attr("height", function(d) {return 50;})
			.attr("width", function(d) {return 50;})
			.style("fill", "red");
		

		vis.selectAll('nodes')
			.data(nodes)
			.enter()
			.append('svg:circle')

			.attr('cx', function (d) {
		    	return d.x;
			})
			.attr('cy', function (d) {
		    	return d.y;
			})

			.attr('r', '5px')
			.attr('fill', '#8844AA');



		vis.selectAll(".line")
	   		.data(links)
	   		.enter()
		   	.append("line")
		   	.attr("x1", function(d) { return d.source.x })
		   	.attr("y1", function(d) { return d.source.y })
		   	.attr("x2", function(d) { return d.target.x })
		   	.attr("y2", function(d) { return d.target.y })
		   	.style("stroke", "rgb(6,120,155)")
		   	*/
	});
	</script>
</body>
</html>